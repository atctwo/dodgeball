<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="/favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/style.css">
    <title>dodgeball</title>
</head>

<body>
    <div id="app">
        <div id="pixi-container"></div>
    </div>

    <div id="dim"></div>

    <div id="menu-container">

        <div class="menu" id="menu-main">
            <h1>Dodge The Spiked Balls</h1>
            <p>
                A clone of the minigame from <cite>Nintendo Switch 2 Welcome Tour</cite>
            </p>
            <table id="scoretable">
            <tr>
                <td></td>
                <td class="scoretable scoretable-header">⏱️</td>
                <td class="scoretable scoretable-header">⭐</td>
            </tr>
            <tr>
                <td id="btn-level-1"><button class="button scoretable-button" onclick="ext_game_load(1)">Level 1</button></td>
                <td class="scoretable-data-td"><div class="scoretable scoretable-data" id="score-time-lvl-1">--</div></td>
                <td class="scoretable-data-td"><div class="scoretable scoretable-data" id="score-stars-lvl-1">--</div></td>
            </tr>
            <tr>
                <td id="btn-level-2"><button class="button scoretable-button" onclick="ext_game_load(2)">Level 2</button></td>
                <td class="scoretable-data-td"><div class="scoretable scoretable-data" id="score-time-lvl-2">--</div></td>
                <td class="scoretable-data-td"><div class="scoretable scoretable-data" id="score-stars-lvl-2">--</div></td>
            </tr>
            <tr>
                <td id="btn-level-3"><button class="button scoretable-button" onclick="ext_game_load(3)">Level 3</button></td>
                <td class="scoretable-data-td"><div class="scoretable scoretable-data" id="score-time-lvl-3">--</div></td>
                <td class="scoretable-data-td"><div class="scoretable scoretable-data" id="score-stars-lvl-3">--</div></td>
            </tr>
            <tr>
                <td id="btn-level-4"><button class="button scoretable-button" onclick="ext_game_load(4)">Level 4</button></td>
                <td class="scoretable-data-td"><div class="scoretable scoretable-data" id="score-time-lvl-4">--</div></td>
                <td class="scoretable-data-td"><div class="scoretable scoretable-data" id="score-stars-lvl-4">--</div></td>
            </tr>
            <tr>
                <td id="btn-level-5"><button class="button scoretable-button" onclick="ext_game_load(5)">Level 5</button></td>
                <td class="scoretable-data-td"><div class="scoretable scoretable-data" id="score-time-lvl-5">--</div></td>
                <td class="scoretable-data-td"><div class="scoretable scoretable-data" id="score-stars-lvl-5">--</div></td>
            </tr>
            </table>
            <br><br>
            <button class="button" onclick="switch_menu('custom')">Custom Mode</button>
            <button class="button" onclick="switch_menu('about')">About Game</button>
            <button class="button" onclick="switch_menu('clear-data')">Clear Data</button><br>
            <div class="debug">
                <button class="button" onclick="switch_menu()">Hide Menu Overlay</button>
                <button class="button" onclick="ext_game_resume();">Start with current settings</button>
            </div>
        </div>

        <div class="menu" id="menu-about">
            <h1>About</h1>
            <p>
                Welcome to <cite>Dodge the Spiked Balls</cite>!  This is a blatant clone of the minigame of the same name from 
                <a href="https://en.wikipedia.org/wiki/Nintendo_Switch_2_Welcome_Tour"><cite>Nintendo Switch 2 Welcome Tour</cite></a>.
                I decided to make this because I thought that it would be fun (and within my ability) to recreate in a weekend.
                It's not 100% perfect compared to the base game but it feels pretty similar (and I think it's still fun either way!).
            </p>
            <p>I hope you enjoy it!</p>

            <h3>How to Play</h3>
            <p>
                When the game starts, move your cursor around to move the little UFO friend.  Try to avoid the spiked balls
                that fall from the top of the screen, while collecting the stars.
            </p>
            <p>
                For each level, the game will record your longest survival time and most amount of stars collected.  You can
                also run a game with custom rules if you want!
            </p>

            <h3>Credits</h3>
            <p>
                <ul>
                    <li>Created using <a href="https://pixijs.com/">PixiJS</a></li>
                    <li>Circular collision detection method from <a href="https://www.jeffreythompson.org/collision-detection/circle-circle.php">Jeffrey Thompson</a></li>
                    <li>Performance monitoring performed using <a href="https://github.com/Prozi/pixi-stats">pixi-stats</a></li>
                    <li>Explosion sound effect by <a href="https://pixabay.com/users/soundreality-31074404/?utm_source=link-attribution&utm_medium=referral&utm_campaign=music&utm_content=343683">Jurij</a> from <a href="https://pixabay.com/sound-effects//?utm_source=link-attribution&utm_medium=referral&utm_campaign=music&utm_content=343683">Pixabay</a></li>
                    <li>Star sound effect by <a href="https://pixabay.com/users/benkirb-8692052/?utm_source=link-attribution&utm_medium=referral&utm_campaign=music&utm_content=268901">Benjamin Adams</a> from <a href="https://pixabay.com/sound-effects//?utm_source=link-attribution&utm_medium=referral&utm_campaign=music&utm_content=268901">Pixabay</a></li>
                </ul>
            </p>

            <p>Made by alex (<a href="https://atctwo.net">atctwo</a>) in june 2025 :3</p>

            <button class="button" onclick="switch_menu('main')">Main Menu</button>
        </div>
        
        <div class="menu" id="menu-clear-data">
            <h1>Clear Data</h1>

            <p>Are you sure?  This will delete all of your locally stored scores.  Lost data can't be recovered!</p>

            <button class="button" onclick="ext_clear_data(); switch_menu('cleared-data')">Proceed</button>
            <button class="button" onclick="switch_menu('main')">Cancel</button>
        </div>

        <div class="menu" id="menu-cleared-data">
            <h1>Data Cleared</h1>
            <p>Data cleared successfully!</p>
            <button class="button" onclick="switch_menu('main')">Return to Main Menu</button>
        </div>

        <div class="menu" id="menu-custom">
            <h1>Custom Mode</h1>
            <p>Test the limits of your skill (and this game) by creating your own game with custom rules!</p>
            <p>Hover over the names of each setting to see a description of what they do!</p>

            <form id="custom-parameters">
                <h2>Object Spawning</h2>
                <table class="custom-table">
                    <tr>
                        <td><label for="ball_time" title="How often the game will attempt to spawn balls (in milliseconds)">Ball Spawn Timer</label></td>
                        <td><input type="number" name="ball_time" id="ball_time" min="0" step="1" value="50"></td>

                        <td><label for="star_time" title="How often the game will attempt to spawn stars (in milliseconds)">Star Spawn Timer</label></td>
                        <td><input type="number" name="star_time" id="star_time" min="0" step="1" value="200"></td>
                    </tr>

                    <tr>
                        <td><label for="ball_chance" title="When attempting to spawn a ball, what is the chance that it succeeds?  (0 means never, 1 means always)">Ball Spawn Chance</label></td>
                        <td><input type="number" name="ball_chance" id="ball_chance" min="0" step="0.1" value="0.7"></td>

                        <td><label for="star_chance" title="When attempting to spawn a star, what is the chance that it succeeds?  (0 means never, 1 means always)">Star Spawn Chance</label></td>
                        <td><input type="number" name="star_chance" id="star_chance" min="0" step="0.1" value="0.5"></td>
                    </tr>

                    <tr>
                        <td><label for="ball_chance_big" title="When spawning a ball, what is the chance that it will be big?">Ball Chance: Big</label></td>
                        <td><input type="number" name="ball_chance_big" id="ball_chance_big" min="0" step="0.0001" value="0.003"></td>
                    </tr>

                    <tr>
                        <td><label for="ball_chance_green" title="When spawning a ball, what is the chance that it will instead be a series of green balls?">Ball Chance: Green</label></td>
                        <td><input type="number" name="ball_chance_green" id="ball_chance_green" min="0" step="0.0001" value="0.003"></td>
                    </tr>

                    <tr>
                        <td><label for="ball_chance_red" title="When spawning a ball, what is the chance that it will be red?">Ball Chance: Red</label></td>
                        <td><input type="number" name="ball_chance_red" id="ball_chance_red" min="0" step="0.0001" value="0.003"></td>
                    </tr>
                </table>

                <h2>Spawn Delay</h2>
                <table class="custom-table">
                    <tr>
                        <td><label for="ball_delay" title="How long the game will wait before spawning regular balls (in milliseconds)">Ball Spawn Delay</label></td>
                        <td><input type="number" name="ball_delay" id="ball_delay" min="0" step="100" value="3000"></td>
                    
                        <td><label for="star_delay" title="How long the game will wait before spawning stars (in milliseconds)">Star Spawn Delay</label></td>
                        <td><input type="number" name="star_delay" id="star_delay" min="0" step="100" value="0"></td>
                    </tr>
                    <tr>
                        <td><label for="ball_big_delay" title="How long the game will wait before spawning big balls (in milliseconds)">Big Ball Spawn Delay</label></td>
                        <td><input type="number" name="ball_big_delay" id="ball_big_delay" min="0" step="100" value="15000"></td>
                    
                        <td><label for="ball_red_delay" title="How long the game will wait before spawning red balls (in milliseconds)">Red Ball Spawn Delay</label></td>
                        <td><input type="number" name="ball_red_delay" id="ball_red_delay" min="0" step="100" value="35000"></td>
                    </tr>
                    <tr>
                        <td><label for="ball_green_delay" title="How long the game will wait before spawning a green ball wave (in milliseconds)">Green Ball Spawn Delay</label></td>
                        <td><input type="number" name="ball_green_delay" id="ball_green_delay" min="0" step="100" value="25000"></td>

                        <td><label for="ball_green_spawn_delay" title="Amount of time between each ball in a green ball wave being spawned (in milliseconds)">Intra-Green Ball Delay</label></td>
                        <td><input type="number" name="ball_green_spawn_delay" id="ball_green_spawn_delay" min="0" step="100" value="500"></td>
                    </tr>
                </table>

                <h2>Object Movement</h2>
                <table class="custom-table">
                    <tr>
                        <td><label for="ball_init_velocity_scale" title="Value corresponding to the initial speed of objects">Object Initial Velocity Scale</label></td>
                        <td><input type="number" name="ball_init_velocity_scale" id="ball_init_velocity_scale" min="0" step="0.1" value="2"></td>
                    </tr>

                    <tr>
                        <td><label for="ball_accel_x" title="Acceleration of objects in the x axis">Object Acceleration (X)</label></td>
                        <td><input type="number" name="ball_accel_x" id="ball_accel_x" min="0" step="0.001" value="0.005"></td>

                        <td><label for="ball_accel_y" title="Acceleration of objects in the y axis">Object Acceleration (Y)</label></td>
                        <td><input type="number" name="ball_accel_y" id="ball_accel_y" min="0" step="0.05" value="0.1"></td>
                    <tr>

                    <tr>
                        <td><label for="ball_big_accel_y" title="Acceleration of big balls in the y axis">Big Ball Acceleration</label></td>
                        <td><input type="number" name="ball_big_accel_y" id="ball_big_accel_y" min="0" step="0.001" value="0.05"></td>
                    </tr>
                    
                    <tr>
                        <td><label for="ball_green_accel_y" title="Acceleration of green balls in the y axis">Green Ball Acceleration</label></td>
                        <td><input type="number" name="ball_green_accel_y" id="ball_green_accel_y" min="0" step="0.001" value="0.03"></td>

                        <td><label for="ball_red_accel_y" title="Acceleration of red balls in the y axis">Red Ball Acceleration</label></td>
                        <td><input type="number" name="ball_red_accel_y" id="ball_red_accel_y" min="0" step="0.001" value="0.2"></td>
                    </tr>

                    <tr>
                        <td><label for="ball_accel_accel_x" title="Amount by which x-axis acceleration changes each frame">Object Acceleration Change Over Time (X)</label></td>
                        <td><input type="number" name="ball_accel_accel_x" id="ball_accel_accel_x" value="0"></td>

                        <td><label for="ball_accel_accel_y" title="Amount by which y-axis acceleration changes each frame (scaled up by 1000 because otherwise the number would be really small!)">Object Acceleration Change Over Time (Y) * 1000</label></td>
                        <td><input type="number" name="ball_accel_accel_y" id="ball_accel_accel_y" value="0.00075"></td>
                    </tr>
                </table><br>
            </form><br>

            <button class="button" onclick="ext_game_start_custom();">Start!</button>
            <button class="button" onclick="ext_game_quit();">Back to Main Menu</button>
        </div>

        <div class="menu" id="menu-pause">
            <h1>Paused</h1>
            <button class="button" onclick="ext_game_resume();">Resume</button>
            <button class="button" onclick="ext_game_quit();">Quit</button>
        </div>

        <div class="menu" id="menu-end">
            <h1>Game Over</h1>
            <p class="new-record" id="new-record-time">⏱️ New Time Record!</p>
            <p class="new-record" id="new-record-stars">⭐ New Star Record!</p>
            <button class="button" onclick="ext_game_resume();">Restart</button>
            <button class="button" onclick="ext_game_quit();">Back to Main Menu</button>
        </div>

        <div class="menu" id="menu-secret">
            <h1>Secret Menu</h1>
            <p>
                aha!  you found my silly secret menu!  well done for finding this, it must have taken some clever
                reverse engineering.  unless you looked at the source code on github or something, i guess that
                counts but it doesn't feel as hackery.
            </p>
            <p>
                either way, here's your prize for hacking my game!  get ready!!! here it is!!!
            </p>
            <img src="assets/002.jpg" width="400px" alt="picture of my dog"><br><br>
            <button class="button" onclick="ext_game_load(0)">Daisy Mode</button>
        </div>

    </div>

    <div id="score-container">
        <div id="score-timer"><span id="score-timer-value">0</span> ⏱️</div>
        <div id="score-stars"><span id="score-stars-value">0</span> ⭐</div>
    </div>

    <div class="debug" id="debug-info">
        Debug mode is enabled!
    </div>

    <script type="module" src="./bundle.min.js"></script>
</body>
</html>
